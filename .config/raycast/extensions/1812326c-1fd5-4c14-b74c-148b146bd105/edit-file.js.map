{
  "version": 3,
  "sources": ["../src/edit-file.ts", "../src/lib/run-shell-command.ts", "../src/utils/get-alacritty-preferences.ts", "../src/types/shell.ts", "../src/lib/spawn-alacritty.ts", "../src/utils/wrap-with-error-toast.ts"],
  "sourcesContent": ["import { getSelectedFinderItems } from \"@raycast/api\";\nimport { runShellCommand } from \"./lib/run-shell-command\";\nimport { wrapWithErrorToast } from \"./utils/wrap-with-error-toast\";\nimport { getAlacrittyPreferences } from \"./utils/get-alacritty-preferences\";\nimport { Shell } from \"./types/shell\";\n\n// if there's demand we could make this configurable, but the ideal solution is to set $EDITOR\nconst fallbackEditorPath = \"/usr/bin/vim\";\n\nconst getEditor = () => {\n  const { shell } = getAlacrittyPreferences();\n  // fish doesn't understand shell parameter expansion\n  if (shell === Shell.Fish) {\n    return `test -z \"$EDITOR\" && set EDITOR '${fallbackEditorPath}' ; $EDITOR`;\n  }\n\n  return `\\${EDITOR:-${fallbackEditorPath}}`;\n};\n\nexport default wrapWithErrorToast(async () => {\n  const items = await getSelectedFinderItems();\n  if (!items.length) {\n    throw new Error(\"Could not get the selected Finder items\");\n  }\n\n  const editor = getEditor();\n  const paths = items.map((item) => `'${item.path}'`).join(\" \");\n  const command = `${editor} ${paths}`;\n  await runShellCommand(command);\n});\n", "import { access, constants } from \"fs/promises\";\nimport { getAlacrittyPreferences } from \"../utils/get-alacritty-preferences\";\nimport { spawnAlacritty } from \"./spawn-alacritty\";\n\nexport const runShellCommand = async (command: string) => {\n  const { shellPath } = getAlacrittyPreferences();\n  try {\n    await access(shellPath, constants.X_OK);\n  } catch (e) {\n    if (e instanceof Error) {\n      if (e.message.includes(\"ENOENT\")) {\n        throw new Error(`Shell not found at path: ${shellPath}`);\n      }\n      if (e.message.includes(\"EACCES\")) {\n        throw new Error(`Shell not executable at path: ${shellPath}`);\n      }\n    }\n\n    throw e;\n  }\n\n  return await spawnAlacritty([\"--command\", shellPath, \"-c\", command]);\n};\n", "import { getPreferenceValues } from \"@raycast/api\";\nimport { Shell, isShell } from \"../types/shell\";\n\nexport const getAlacrittyPreferences = () => {\n  const { alacrittyPath, shellPath } = getPreferenceValues<ExtensionPreferences>();\n  if (alacrittyPath.split(\"/\").pop() !== \"alacritty\") {\n    throw new Error(`Invalid Alacritty path: ${alacrittyPath}`);\n  }\n\n  const shell = shellPath.split(\"/\").pop();\n  if (!shell || !isShell(shell)) {\n    throw new Error(`Invalid shell: ${shell} (use ${Object.values(Shell).join(\", \")})`);\n  }\n\n  return { alacrittyPath, shellPath, shell };\n};\n", "export enum Shell {\n  Bash = \"bash\",\n  Zsh = \"zsh\",\n  Fish = \"fish\",\n  Sh = \"sh\",\n}\n\nexport const isShell = (shell: string): shell is Shell => {\n  return Object.values(Shell).includes(shell as Shell);\n};\n", "import { spawn } from \"child_process\";\nimport { getAlacrittyPreferences } from \"../utils/get-alacritty-preferences\";\n\nexport const spawnAlacritty = (args: string[]) =>\n  new Promise((resolve, reject) => {\n    const { alacrittyPath } = getAlacrittyPreferences();\n\n    const alacritty = spawn(alacrittyPath, args);\n    alacritty.on(\"error\", (error) => {\n      if (error.message.includes(\"ENOENT\")) {\n        reject(new Error(`Alacritty not found at path: ${alacrittyPath}`));\n        return;\n      }\n\n      reject(error);\n    });\n    alacritty.stderr.on(\"data\", (data) => reject(new Error(data.toString())));\n    alacritty.on(\"close\", (code) => resolve(code));\n  });\n", "import { Toast, showToast } from \"@raycast/api\";\n\nexport const wrapWithErrorToast = (fn: () => Promise<unknown>) => async () => {\n  try {\n    await fn();\n  } catch (e) {\n    await showToast({\n      title: \"Error\",\n      message: e instanceof Error ? e.message : String(e),\n      style: Toast.Style.Failure,\n    });\n  }\n};\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAuC,wBCAvC,IAAAC,EAAkC,uBCAlC,IAAAC,EAAoC,wBCA7B,IAAKC,OACVA,EAAA,KAAO,OACPA,EAAA,IAAM,MACNA,EAAA,KAAO,OACPA,EAAA,GAAK,KAJKA,OAAA,IAOCC,EAAWC,GACf,OAAO,OAAOF,CAAK,EAAE,SAASE,CAAc,EDL9C,IAAMC,EAA0B,IAAM,CAC3C,GAAM,CAAE,cAAAC,EAAe,UAAAC,CAAU,KAAI,uBAA0C,EAC/E,GAAID,EAAc,MAAM,GAAG,EAAE,IAAI,IAAM,YACrC,MAAM,IAAI,MAAM,2BAA2BA,GAAe,EAG5D,IAAME,EAAQD,EAAU,MAAM,GAAG,EAAE,IAAI,EACvC,GAAI,CAACC,GAAS,CAACC,EAAQD,CAAK,EAC1B,MAAM,IAAI,MAAM,kBAAkBA,UAAc,OAAO,OAAOE,CAAK,EAAE,KAAK,IAAI,IAAI,EAGpF,MAAO,CAAE,cAAAJ,EAAe,UAAAC,EAAW,MAAAC,CAAM,CAC3C,EEfA,IAAAG,EAAsB,yBAGf,IAAMC,EAAkBC,GAC7B,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/B,GAAM,CAAE,cAAAC,CAAc,EAAIC,EAAwB,EAE5CC,KAAY,SAAMF,EAAeH,CAAI,EAC3CK,EAAU,GAAG,QAAUC,GAAU,CAC/B,GAAIA,EAAM,QAAQ,SAAS,QAAQ,EAAG,CACpCJ,EAAO,IAAI,MAAM,gCAAgCC,GAAe,CAAC,EACjE,OAGFD,EAAOI,CAAK,CACd,CAAC,EACDD,EAAU,OAAO,GAAG,OAASE,GAASL,EAAO,IAAI,MAAMK,EAAK,SAAS,CAAC,CAAC,CAAC,EACxEF,EAAU,GAAG,QAAUG,GAASP,EAAQO,CAAI,CAAC,CAC/C,CAAC,EHdI,IAAMC,EAAkB,MAAOC,GAAoB,CACxD,GAAM,CAAE,UAAAC,CAAU,EAAIC,EAAwB,EAC9C,GAAI,CACF,QAAM,UAAOD,EAAW,YAAU,IAAI,CACxC,OAAS,EAAP,CACA,GAAI,aAAa,MAAO,CACtB,GAAI,EAAE,QAAQ,SAAS,QAAQ,EAC7B,MAAM,IAAI,MAAM,4BAA4BA,GAAW,EAEzD,GAAI,EAAE,QAAQ,SAAS,QAAQ,EAC7B,MAAM,IAAI,MAAM,iCAAiCA,GAAW,EAIhE,MAAM,CACR,CAEA,OAAO,MAAME,EAAe,CAAC,YAAaF,EAAW,KAAMD,CAAO,CAAC,CACrE,EItBA,IAAAI,EAAiC,wBAEpBC,EAAsBC,GAA+B,SAAY,CAC5E,GAAI,CACF,MAAMA,EAAG,CACX,OAASC,EAAP,CACA,QAAM,aAAU,CACd,MAAO,QACP,QAASA,aAAa,MAAQA,EAAE,QAAU,OAAOA,CAAC,EAClD,MAAO,QAAM,MAAM,OACrB,CAAC,CACH,CACF,ELLA,IAAMC,EAAqB,eAErBC,EAAY,IAAM,CACtB,GAAM,CAAE,MAAAC,CAAM,EAAIC,EAAwB,EAE1C,OAAID,WACK,oCAAoCF,eAGtC,cAAcA,IACvB,EAEOI,EAAQC,EAAmB,SAAY,CAC5C,IAAMC,EAAQ,QAAM,0BAAuB,EAC3C,GAAI,CAACA,EAAM,OACT,MAAM,IAAI,MAAM,yCAAyC,EAG3D,IAAMC,EAASN,EAAU,EACnBO,EAAQF,EAAM,IAAKG,GAAS,IAAIA,EAAK,OAAO,EAAE,KAAK,GAAG,EACtDC,EAAU,GAAGH,KAAUC,IAC7B,MAAMG,EAAgBD,CAAO,CAC/B,CAAC",
  "names": ["edit_file_exports", "__export", "edit_file_default", "__toCommonJS", "import_api", "import_promises", "import_api", "Shell", "isShell", "shell", "getAlacrittyPreferences", "alacrittyPath", "shellPath", "shell", "isShell", "Shell", "import_child_process", "spawnAlacritty", "args", "resolve", "reject", "alacrittyPath", "getAlacrittyPreferences", "alacritty", "error", "data", "code", "runShellCommand", "command", "shellPath", "getAlacrittyPreferences", "spawnAlacritty", "import_api", "wrapWithErrorToast", "fn", "e", "fallbackEditorPath", "getEditor", "shell", "getAlacrittyPreferences", "edit_file_default", "wrapWithErrorToast", "items", "editor", "paths", "item", "command", "runShellCommand"]
}
